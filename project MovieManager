// ØªØ¹Ø±ÙŠÙ ÙƒÙ„Ø§Ø³ Movie
class Movie {
    var id: Int
    var title: String
    var director: String
    var rating: Double?
    var available: Bool?
    
    init(id: Int, title: String, director: String, rating: Double?, available: Bool?) {
        self.id = id
        self.title = title
        self.director = director
        self.rating = rating
        self.available = available
    }
    
    func displayInfo() {
        print("""
        ÙÙŠÙ„Ù…:
        ID: \(id)
        Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: \(title)
        Ø§Ù„Ù…Ø®Ø±Ø¬: \(director)
        Ø§Ù„ØªÙ‚ÙŠÙŠÙ…: \(rating ?? 0.0)
        Ù…ØªØ§Ø­: \((available ?? false) ? "Ù†Ø¹Ù…" : "Ù„Ø§")
        """)
    }
}

// ØªØ¹Ø±ÙŠÙ ÙƒÙ„Ø§Ø³ MovieManager
class MovieManager {
    private var movies: [Movie] = []
    
    // Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ù…
    func addMovie(_ movie: Movie) {
        movies.append(movie)
    }
    
    // Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£ÙÙ„Ø§Ù…
    func displayAllMovies() {
        for mov in movies {
            mov.displayInfo()
            print("---------------------")
        }
    }
    
    // Ø­Ø°Ù ÙÙŠÙ„Ù…
    func deleteMovie(_ id: Int) {
        movies.removeAll { $0.id == id }
    }
    
    // Ø¨Ø­Ø« Ø¨Ø¹Ù†ÙˆØ§Ù†
    func findByTitle(_ title: String) -> [Movie] {
        return movies.filter { $0.title.lowercased().contains(title.lowercased()) }
    }
    
    // Ø¨Ø­Ø« Ø¨Ù…Ø®Ø±Ø¬
    func findByDirector(_ director: String) -> [Movie] {
        return movies.filter { $0.director.lowercased().contains(director.lowercased()) }
    }
    
    // ØªØ¹Ø¯ÙŠÙ„ ÙÙŠÙ„Ù…
    func editMovie(id: Int, title: String?, director: String?, rating: Double?, available: Bool?) {
        if let mov = movies.first(where: { $0.id == id }) {
            if let newTitle = title { mov.title = newTitle }
            if let newDirector = director { mov.director = newDirector }
            if let newRating = rating { mov.rating = newRating }
            if let newAvailable = available { mov.available = newAvailable }
        } else {
            print("âŒ Ù„Ø§ ÙŠÙˆØ¬Ø¯ ÙÙŠÙ„Ù… Ø¨Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ø±Ù.")
        }
    }
    
    // Ø¨ÙŠØ¹ ÙÙŠÙ„Ù… (Ø¬Ø¹Ù„Ù‡ ØºÙŠØ± Ù…ØªØ§Ø­)
    func sellMovie(id: Int) {
        if let mov = movies.first(where: { $0.id == id }) {
            if mov.available == true {
                mov.available = false
            }
        }
    }
    
    // Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ù…Ù…ØªØ§Ø²Ø©
    func displayExcellentMovies() {
        let excellent = movies.filter { ($0.rating ?? 0.0) >= 4.0 }
        if excellent.isEmpty {
            print(" Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙÙ„Ø§Ù… Ù…Ù…ØªØ§Ø²Ø© Ø­Ø§Ù„ÙŠØ§Ù‹.")
        } else {
            print("ğŸ¯ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ù…Ù…ØªØ§Ø²Ø©:")
            for movie in excellent {
                movie.displayInfo()
                print("---------------------")
            }
        }
    }

    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    func showMenu() {
        print("""
        ğŸ¬ Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø£ÙÙ„Ø§Ù…
        Ø§Ø®ØªØ± Ø®ÙŠØ§Ø±Ù‹Ø§:
        1. Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£ÙÙ„Ø§Ù…
        2. Ø¥Ø¶Ø§ÙØ© ÙÙŠÙ„Ù…
        3. ØªØ¹Ø¯ÙŠÙ„ ÙÙŠÙ„Ù…
        4. Ø­Ø°Ù ÙÙŠÙ„Ù…
        5. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø¨Ø¹Ù†ÙˆØ§Ù†
        6. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙÙŠÙ„Ù… Ø¨Ù…Ø®Ø±Ø¬
        7. Ø§Ù„Ø®Ø±ÙˆØ¬
        """)
        print("----------------")
    }
}

// ğŸ¬ ØªØ¬Ø±Ø¨Ø© Ø§Ù„Ø¨Ø±Ù†Ø§Ù…Ø¬

let manager = MovieManager()

// Ø¹Ø±Ø¶ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
manager.showMenu()

// Ø¥Ø¶Ø§ÙØ© Ø£ÙÙ„Ø§Ù…
manager.addMovie(Movie(id: 1, title: "Inception", director: "Christopher Nolan", rating: 8.8, available: true))
manager.addMovie(Movie(id: 2, title: "The Matrix", director: "Lana Wachowski", rating: 8.7, available: true))
manager.addMovie(Movie(id: 3, title: "Interstellar", director: "Christopher Nolan", rating: 8.6, available: true))

// Ø¹Ø±Ø¶ ÙƒÙ„ Ø§Ù„Ø£ÙÙ„Ø§Ù…
manager.displayAllMovies()

// Ø¨ÙŠØ¹ ÙÙŠÙ„Ù… (Ø¬Ø¹Ù„Ù‡ ØºÙŠØ± Ù…ØªØ§Ø­)
manager.sellMovie(id: 2)

// ØªØ¹Ø¯ÙŠÙ„ ÙÙŠÙ„Ù…
manager.editMovie(id: 3, title: "Interstellar (2014)", director: nil, rating: 9.0, available: nil)

// Ø§Ù„Ø¨Ø­Ø« Ø¨Ø¹Ù†ÙˆØ§Ù†
let result1 = manager.findByTitle("matrix")
for movie in result1 {
    movie.displayInfo()
}

// Ø§Ù„Ø¨Ø­Ø« Ø¨Ù…Ø®Ø±Ø¬
let result2 = manager.findByDirector("Nolan")
for movie in result2 {
    movie.displayInfo()
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø£ÙÙ„Ø§Ù… Ø§Ù„Ù…Ù…ØªØ§Ø²Ø©
manager.displayExcellentMovies()

// Ø­Ø°Ù ÙÙŠÙ„Ù…
manager.deleteMovie(1)

// Ø¹Ø±Ø¶ Ø¨Ø¹Ø¯ Ø§Ù„Ø­Ø°Ù
manager.displayAllMovies()
